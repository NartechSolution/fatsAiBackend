// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

// Temperature and Humidity data model
model Temperature {
  id          Int      @id @default(autoincrement())
  temperature Float
  humidity    Float
  timestamp   DateTime @default(now())
}

// Soil Moisture data model
model SoilMoistureData {
  id        Int      @id @default(autoincrement())
  moisture  Float
  timestamp DateTime @default(now())
}

// User model for authentication
model User {
  id          String   @id @default(cuid())
  email       String   @unique
  username    String   @unique
  password    String
  isNfcEnable Boolean  @default(false)
  nfcNumber   String?  // Optional NFC card number
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt


   //optional fields
   firstName   String?
   lastName    String?
   cr_number           String? @db.NVarChar(100)
  cr_activity         String? @db.NVarChar(Max)
  company_name_eng    String? @db.NVarChar(Max)
  company_name_arabic String? @db.NVarChar(Max)
  company_landline    String? @db.NVarChar(Max)
  business_type       String? @db.NVarChar(50) // organization, individual/family business
  zip_code            String? @db.VarChar(50)
  industry_types      String? @db.NVarChar(Max) // JSON string
  country             String? @db.NVarChar(100)
  state               String? @db.NVarChar(100)
  city                String? @db.NVarChar(100)
  membership_category String? @db.NVarChar(50)
  user_source         String? @default("fatsAi") @db.NVarChar(20) // gst, printpack
  tin_number          String? @db.NVarChar(100)
  image               String?
  gps_location String? @db.NVarChar(Max)
  latitude     String?
  longitude    String?
  
  // Additional user profile fields
  phoneNo             String? @db.NVarChar(20)
  dateOfBirth         DateTime?
  gender              String? @db.NVarChar(10)
  displayName         String? @db.NVarChar(100)
  bio                 String? @db.NVarChar(Max)
  language            String? @db.NVarChar(10)
  emailNotification   Boolean @default(true)
  smsAlert            Boolean @default(false)
  pushNotification    Boolean @default(true)
  buildingNumber      String? @db.NVarChar(50)
  companySize         String? @db.NVarChar(50)
  website             String? @db.NVarChar(Max)
  bAddress            String? @db.NVarChar(Max)
  bBuildingNumber     String? @db.NVarChar(50)
  bCountry            String? @db.NVarChar(100)
  bState              String? @db.NVarChar(100)
  bCity               String? @db.NVarChar(100)
  bZipCode            String? @db.VarChar(50)
  vatNumber           String? @db.NVarChar(100)
  commercialRegistration String? @db.NVarChar(100)
  
  // Payment fields
  cardNumber          String? @db.NVarChar(20)
  cvc                 String? @db.NVarChar(4)
  expireDate          String? @db.NVarChar(10)
  paymentType         String? @default("bankTransfer") @db.NVarChar(20)

  // Relations
  user_subscriptions UserSubscription[]
  documents_owned    MemberDocument[]   @relation("DocumentOwner")
  documents_uploaded MemberDocument[]   @relation("UploadedByMember")
  manageLocations    ManageLocation[]
  maintenances       Maintenance[]
  
  @@map("users")
}

// Admin model for admin authentication
model Admin {
  id          String   @id @default(cuid())
  email       String   @unique
  username    String   @unique
  password    String
  fullName    String?  @db.NVarChar(200)
  status      String   @default("inactive") @db.NVarChar(20) // inactive, active, pending
  loginOtp    String?
  loginOtpExpiresAt DateTime?
  loginOtpAttempts  Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relations
  roleId      Int?
  role        Role?    @relation(fields: [roleId], references: [id])
  
  departmentId Int?
  department  Department? @relation(fields: [departmentId], references: [id])

  member_documents MemberDocument[] @relation("UploadedByAdmin")
  
  @@map("admins")
}

// Fuel Level data model
model FuelLevel {
  id        Int      @id @default(autoincrement())
  level     Float    // Current fuel level (percentage or volume)
  capacity  Float    // Total fuel capacity
  timestamp DateTime @default(now())
}

// Vibration Sensor data model
model VibrationSensor {
  id             Int      @id @default(autoincrement())
  amplitude      Float    // Vibration amplitude (in mm/s or g)
  frequency      Float    // Vibration frequency (in Hz)
  axisX          Float    // X-axis vibration value
  axisY          Float    // Y-axis vibration value
  axisZ          Float    // Z-axis vibration value
  rms            Float    // Root Mean Square value of vibration
  peakValue      Float    // Peak vibration value
  deviceId       String   // Identifier for the vibration sensor device
  timestamp      DateTime @default(now())
}

// PermissionCategory model
model PermissionCategory {
  id          Int      @id @default(autoincrement())
  name        String   // e.g., "User Management", "Asset Management"
  status      String   @default("active")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  permissions Permission[] // One-to-many relationship with Permission
}

// Permission model
model Permission {
  id          Int      @id @default(autoincrement())
  name        String   // e.g., "View Users", "Create Users", "Edit Assets"
  description String?
  status      String   @default("active")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  roles       RolePermission[] // Many-to-many relationship with Role
  
  categoryId  Int
  category    PermissionCategory @relation(fields: [categoryId], references: [id])
}

// Role model
model Role {
  id            Int      @id @default(autoincrement())
  name          String
  status        String
  description   String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  
  // Relations
  employees     EmployeeList[] // One-to-many relationship with EmployeeList
  admins        Admin[] // One-to-many relationship with Admin
  
  accessLevelId Int?
  accessLevel   AccessLevel? @relation(fields: [accessLevelId], references: [id])
  
  permissions   RolePermission[] // Many-to-many relationship with Permission
}

// RolePermission junction table for many-to-many relationship
model RolePermission {
  id           Int      @id @default(autoincrement())
  roleId       Int
  permissionId Int
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  
  // Relations
  role       Role       @relation(fields: [roleId], references: [id], onDelete: Cascade)
  permission Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)
  
  @@unique([roleId, permissionId]) // Ensure unique role-permission combinations
}

// AccessLevel model
model AccessLevel {
  id        Int      @id @default(autoincrement())
  name      String
  status    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  // Relations
  roles     Role[] // One-to-many relationship with Role
}

// Employee List model
model EmployeeList {
  id           Int      @id @default(autoincrement())
  employeeName String?  // Keeping for backward compatibility
  jobType      String?  // Keeping for backward compatibility
  firstName    String
  lastName     String
  email        String
  image        String?  // Path to the image file
  jobTitle     String
  status       String
  joiningDate  DateTime?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  
  // Relations
  transferAssets TransferAsset[] // One-to-many relationship with TransferAsset
  newAssets      NewAsset[] // One-to-many relationship with NewAsset

  departmentId  Int?
  department    Department? @relation(fields: [departmentId], references: [id])
  
  roleId        Int?
  role          Role? @relation(fields: [roleId], references: [id])
}

// Asset model
model Asset {
  id             Int          @id @default(autoincrement())
  name           String
  tagNumber      String       @unique
  model          String
  brand          String
  serialNumber   String?
  assetCondition String       // e.g., "Good", "Fair", "Poor"
  assetStatus    String       // e.g., "In Use", "In Storage", "Under Maintenance"
  description    String
  assetDescription String?
  image          String?      // Path to the image file
  price          Float?       // Price of the asset
  modifiers      String?      // Additional modifiers or specifications
  manufactureDate DateTime?   // Date of manufacture
  expiryDate     DateTime?    // Expiry or warranty end date
  currentStock   Int          @default(0) // Current stock quantity
  status         Int          @default(0)

  

  // Relations
  categoryId     Int
  category       Category     @relation(fields: [categoryId], references: [id])
  
  subCategoryId  Int
  subCategory    SubCategory  @relation(fields: [subCategoryId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  
  locationId     Int
  location       Location     @relation(fields: [locationId], references: [id])
  locationCode   String
  
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt
}

// Category model
model Category {
  id           Int           @id @default(autoincrement())
  name         String        @unique
  description  String?
  subCategories SubCategory[] // One-to-many relationship with SubCategory
  assets       Asset[]       // One-to-many relationship with Asset
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
}

// SubCategory model
model SubCategory {
  id          Int       @id @default(autoincrement())
  name        String    
  description String?
  categoryId  Int       // Foreign key to Category
  category    Category  @relation(fields: [categoryId], references: [id])
  assets      Asset[]   // One-to-many relationship with Asset
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@unique([name, categoryId]) // Ensure subcategory names are unique within a category
}

// CategoryManagementType model
model CategoryManagementType {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  status    String   @default("active") @db.NVarChar(20)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  // Relations
  mainCategoryManagements MainCategoryManagement[] // One-to-many relationship with MainCategoryManagement
}

// MainCategoryManagement model
model MainCategoryManagement {
  id                        Int      @id @default(autoincrement())
  name                      String
  status                    String   @default("active") @db.NVarChar(20)
  slugOrUrl                 String?  @db.NVarChar(255)
  description               String?  @db.NVarChar(Max)
  displayOrder              Int      @default(0)
  icon                      String?  // Path to the icon file
  textIcon                  String?  // Text icon field
  tagColor                  String?  @db.NVarChar(50)
  roleVisibility            String?  @db.NVarChar(Max) // JSON string or comma-separated role IDs
  linkedPage                String?  @db.NVarChar(255)
  seoTitle                  String?  @db.NVarChar(255)
  seoDescription            String?  @db.NVarChar(Max)
  displayLayout             String?  @db.NVarChar(50)
  createdAt                 DateTime @default(now())
  updatedAt                 DateTime @updatedAt
  
  // Relations
  categoryManagementTypeId  Int
  categoryManagementType    CategoryManagementType @relation(fields: [categoryManagementTypeId], references: [id], onDelete: Cascade)
  
  parentCategoryId          Int?
  parentCategory            MainCategoryManagement? @relation("ParentCategory", fields: [parentCategoryId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  childCategories           MainCategoryManagement[] @relation("ParentCategory")
  
  @@index([categoryManagementTypeId])
  @@index([parentCategoryId])
}

// MainFooter model
model MainFooter {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  status    String   @default("active") @db.NVarChar(20)
  textIcon  String?  // Text icon field
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// SubFooter model (parent)
model SubFooter {
  id          Int          @id @default(autoincrement())
  name        String       @unique
  status      String       @default("active") @db.NVarChar(20)
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  footerItems FooterItem[] // One-to-many: one SubFooter has many FooterItems
}

// FooterItem model (child)
model FooterItem {
  id              Int       @id @default(autoincrement())
  name            String
  url             String?   @db.NVarChar(500)
  openIn          String?   @db.NVarChar(20) // e.g., "_blank", "_self", "_parent", "_top"
  icon            String?  // Path to the icon file
  textIcon        String?  // Text icon field
  description     String?  @db.NVarChar(Max)
  roleVisibility  String?  @db.NVarChar(Max) // JSON string or comma-separated role IDs
  subFooterId     Int?      // Foreign key to parent SubFooter
  subFooter       SubFooter? @relation(fields: [subFooterId], references: [id], onDelete: SetNull)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

// Location model
model Location {
  id           Int       @id @default(autoincrement())
  company      String
  building     String
  level_floor  String
  office       String
  room         String
  locationCode String    @unique
  assets       Asset[]   // One-to-many relationship with Asset
  manageLocations ManageLocation[] // One-to-many relationship with ManageLocation
  newAssets    NewAsset[] // One-to-many relationship with NewAsset
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

// MegaMenu model
model MegaMenu {
  id          Int           @id @default(autoincrement())
  name_en     String
  name_ar     String
  icon        String?       // Path to the icon file
  textIcon    String?       // Text icon field
  status      Boolean       @default(true)
  subMenus    SubMegaMenu[] // One-to-many relationship with SubMegaMenu
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

// SubMegaMenu model
model SubMegaMenu {
  id             Int       @id @default(autoincrement())
  name_en        String
  name_ar        String
  image          String?   // Path to the image file
  caption        String?
  caption_ar     String?
  textIcon       String?    // Text icon field
  status         Boolean   @default(true)
  url            String
  openIs         String?   @db.NVarChar(20) // e.g., "_blank", "_self", "_parent", "_top"
  roleVisibility String?   @db.NVarChar(Max) // JSON string or comma-separated role IDs
  megamenu_id    Int       // Foreign key to MegaMenu
  megaMenu       MegaMenu  @relation(fields: [megamenu_id], references: [id])
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
}

// Brand model
model Brand {
  id        Int       @id @default(autoincrement())
  name      String    @unique
  status    Boolean   @default(true)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

// AssetCondition model
model AssetCondition {
  id          Int       @id @default(autoincrement())
  name        String    @unique
  description String?
  status      Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  
  // Relations
  newAssets   NewAsset[] // One-to-many relationship with NewAsset
}

// HeadOfDepartment model
model HeadOfDepartment {
  id        Int      @id @default(autoincrement())
  name      String
  phoneNo   String
  email     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  departments Department[] // One-to-many: one Head can be head of multiple Departments
}

// Department model
model Department {
  id                     Int            @id @default(autoincrement())
  departmentCode         String         @unique
  departmentName         String
  departmentDescription  String
  location               String
  annualBudget           String
  status                 String

  // Relations
  employees              EmployeeList[] // One-to-many: one Department has many Employees
  admins                 Admin[] // One-to-many: one Department has many Admins
  cities                 City[] // Many-to-many: one Department can belong to many Cities
  newAssets              NewAsset[] // One-to-many relationship with NewAsset
  
  hodId                  Int?
  headOfDepartment       HeadOfDepartment? @relation(fields: [hodId], references: [id])

  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

// City model
model City {
  id          Int        @id @default(autoincrement())
  name        String
  country     String
  latitude    Float
  longitude   Float
  status      String
  description String?

  // Relations
  departments Department[]

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// NPK Sensor data model
model NPKSensor {
  id          Int      @id @default(autoincrement())
  nitrogen    Float    // Nitrogen level (in mg/kg or ppm)
  phosphorus  Float    // Phosphorus level (in mg/kg or ppm)
  potassium   Float    // Potassium level (in mg/kg or ppm)
  ph          Float    // pH level of the soil (0-14 scale)
  deviceId    String   // Identifier for the NPK sensor device
  timestamp   DateTime @default(now())
}

// DeviceCategory model
model DeviceCategory {
  id          Int        @id @default(autoincrement())
  name        String     @unique
  description String?
  image       String?    // Path to the image file
  button      String?    // Button text or action
  iotDevices  IotDevice[] // One-to-many relationship with IotDevice
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
}

// IotDevice model
model IotDevice {
  id              Int            @id @default(autoincrement())
  name            String
  tagNumber       String         @unique
  model           String
  serialNumber    String?
  image           String?        // Path to the image file
  price           Float?         // Price of the device
  modifiers       String?        // Additional modifiers or specifications
  manufactureDate DateTime?      // Date of manufacture
  expiryDate      DateTime?      // Expiry or warranty end date
  status          Int            @default(0)
  
  // Relations
  deviceCategoryId Int
  deviceCategory   DeviceCategory @relation(fields: [deviceCategoryId], references: [id])
  
  iotDeviceAssets  IotDeviceAsset[] // One-to-many relationship with IotDeviceAsset
  
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
}
model Service {
  id           String   @id @default(cuid())
  name         String   @unique 
  name_ar      String?  @db.NVarChar(Max)
  display_name String   
  display_name_ar String? @db.NVarChar(Max)
  description  String?  
  description_ar String? @db.NVarChar(Max)
  service_type String   @default("feature") 
  icon         String?  
  is_active    Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @default(now()) @updatedAt

  // Relations
  plan_services PlanService[]

  @@map("services")
}
// Many-to-Many relationship between Plans and Services
model PlanService {
  id          String   @id @default(cuid())
  planId      String   @map("plan_id")
  serviceId   String   @map("service_id")
  isIncluded  Boolean  @default(true) @map("is_included")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")

  // Relations
  plan    SubscriptionPlan @relation(fields: [planId], references: [id], onDelete: Cascade)
  service Service          @relation(fields: [serviceId], references: [id], onDelete: Cascade)

  @@unique([planId, serviceId])
  @@map("plan_services")
}

model SubscriptionPlan {
  id            String   @id @default(cuid())
  name          String   @unique @db.NVarChar(100) // "free_services", "standard", "professional", "enterprise"
  name_ar       String?  @db.NVarChar(100)
  displayName   String   @map("display_name") @db.NVarChar(150)
  displayName_ar String? @map("display_name_ar") @db.NVarChar(150)
  description   String?  @db.NVarChar(500)
  description_ar String? @db.NVarChar(500)
  price         Decimal  @db.Decimal(10, 2)
  billingCycle  String   @default("yearly") @map("billing_cycle") @db.NVarChar(20)
  isPopular     Boolean  @default(false) @map("is_popular")
  isActive      Boolean  @default(true) @map("is_active")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @default(now()) @updatedAt @map("updated_at")

  // Relations
  plan_services      PlanService[]
  user_subscriptions UserSubscription[]

  @@map("subscription_plans")
}
model UserSubscription {
  id                  String    @id @default(cuid())
  userId              String    @map("user_id")
  planId              String    @map("plan_id")
  status              String    @default("active") @db.NVarChar(20)
  startedAt           DateTime  @default(now()) @map("started_at")
  expiresAt           DateTime? @map("expires_at")
  paymentStatus       String    @default("pending") @map("payment_status") @db.NVarChar(20)
  amountPaid          Decimal?  @map("amount_paid") @db.Decimal(10, 2)
  paymentMethod       String?   @map("payment_method") @db.NVarChar(50)
  transactionId       String?   @map("transaction_id") @db.NVarChar(100)
  cancelledAt         DateTime? @map("cancelled_at")
  cancellationReason  String?   @map("cancellation_reason") @db.NVarChar(500)
  notes               String?   @db.NVarChar(Max) // optional additional info
  createdAt           DateTime  @default(now()) @map("created_at")
  updatedAt           DateTime  @default(now()) @updatedAt @map("updated_at")

  // Relations
  user User             @relation(fields: [userId], references: [id], onDelete: Cascade)
  plan SubscriptionPlan @relation(fields: [planId], references: [id])

  @@map("user_subscriptions")
}
model MemberDocument {
  id                   String   @id @default(cuid())
  documentPath         String   @db.NVarChar(Max)
  transactionId        String   @default("0") @map("transaction_id") @db.NVarChar(255)
  userId               String   @map("user_id")
  createdAt            DateTime @default(now()) @map("created_at")
  updatedAt            DateTime @updatedAt @map("updated_at")
  docType              String   @map("doc_type") @db.NVarChar(50)
  status               String?  @default("active") @db.VarChar(20)

  deletedAt            DateTime? @map("deleted_at")

  uploadedByAdminId    String?  @map("uploaded_by_admin_id") // optional FK
  uploadedByMemberId   String?  @map("uploaded_by_member_id") // optional FK

  // Relations
  user   User    @relation("DocumentOwner", fields: [userId], references: [id], onDelete: Cascade)
  admin  Admin?  @relation("UploadedByAdmin", fields: [uploadedByAdminId], references: [id], onDelete: SetNull)
  member User?   @relation("UploadedByMember", fields: [uploadedByMemberId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("member_documents")
}

model Template {
  id             String    @id @default(cuid())
  name           String    @db.NVarChar(Max)
  name_ar        String    @db.NVarChar(Max)
  description    String?   @db.NVarChar(Max)
  description_ar String?   @db.NVarChar(Max)
  created_at     DateTime  @default(now()) @db.DateTime
  updated_at     DateTime  @default(now()) @db.DateTime
  pages          NewPage[]
}

model NewPage {
  id                 String    @id @default(cuid())
  name               String?   @db.NVarChar(Max)
  name_ar            String?   @db.NVarChar(Max)
  slug               String?   @unique
  seo_description    String?   @db.NVarChar(Max)
  seo_description_ar String?   @db.NVarChar(Max)
  status             Int?
  template_id        String
  created_at         DateTime? @default(now()) @db.DateTime
  updated_at         DateTime? @default(now()) @db.DateTime
  template           Template  @relation(fields: [template_id], references: [id], onDelete: Cascade)
  sections           Section[]
}

model Section {
  id         String    @id @default(cuid())
  page_id    String
  name       String    @db.NVarChar(Max)
  name_ar    String    @db.NVarChar(Max)
  order      Int
  created_at DateTime  @default(now()) @db.DateTime
  updated_at DateTime  @default(now()) @db.DateTime
  contents   Content[]
  page       NewPage   @relation(fields: [page_id], references: [id], onDelete: Cascade)
}

model Content {
  id         String   @id @default(cuid())
  section_id String
  type       String   @db.NVarChar(Max)
  data       String   @db.NVarChar(Max)
  created_at DateTime @default(now()) @db.DateTime
  updated_at DateTime @default(now()) @db.DateTime
  data_ar    String?  @db.NVarChar(Max)
  section    Section  @relation(fields: [section_id], references: [id], onDelete: Cascade)
}
model rainStatus{
 id        Int @id @default(autoincrement())
 status    Float 
 createdAt DateTime @default(now()) @map("created_at")
 updatedAt DateTime @default(now()) @map("updated_at")
}

model motionDetection{
 id        Int @id @default(autoincrement())
 status    String 
 createdAt DateTime @default(now()) @map("created_at")
 updatedAt DateTime @default(now()) @map("updated_at")
}
model vibrationDetection{
 id        Int @id @default(autoincrement())
 status    String 
 createdAt DateTime @default(now()) @map("created_at")
 updatedAt DateTime @default(now()) @map("updated_at")
}
model gasDetection{
 id        Int @id @default(autoincrement())
 status    Float 
 createdAt DateTime @default(now()) @map("created_at")
 updatedAt DateTime @default(now()) @map("updated_at")
}
model ultrasonic{
 id        Int @id @default(autoincrement())
 status    Float 
 createdAt DateTime @default(now()) @map("created_at")
 updatedAt DateTime @default(now()) @map("updated_at")
}
model carDetection{
 id        Int @id @default(autoincrement())
 distance  Float
 status    String 
 createdAt DateTime @default(now()) @map("created_at")
 updatedAt DateTime @default(now()) @map("updated_at")
}

model FirstContainer {
  id              Int      @id @default(autoincrement())
  name            String
  name_ar         String
  description     String?
  description_ar  String?
  image           String?  // Path to the image file
  status          Boolean  @default(true)
  url             String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model SecondContainer {
  id              Int      @id @default(autoincrement())
  name            String
  name_ar         String
  description     String?
  description_ar  String?
  image           String?  // Path to the image file
  status          Boolean  @default(true)
  url             String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model ThirdContainer {
  id              Int      @id @default(autoincrement())
  name            String
  name_ar         String
  description     String?
  description_ar  String?
  image           String?  // Path to the image file
  status          Boolean  @default(true)
  url             String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model FourthContainer {
  id              Int      @id @default(autoincrement())
  name            String
  name_ar         String
  description     String?
  description_ar  String?
  image           String?  // Path to the image file
  status          Boolean  @default(true)
  url             String?
  points          String?   // Stored as JSON string of array
  points_ar       String?   // Stored as JSON string of array for Arabic
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Comment {
  id              Int      @id @default(autoincrement())
  name            String
  title           String
  title_ar        String
  description     String?
  description_ar  String?
  image           String?  // Path to the image file
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model DemoRequest {
  id              Int      @id @default(autoincrement())
  email           String
  phoneNumber     String
  companyName     String
  message         String?
  status          String   @default("pending") // pending, contacted, completed
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Header {
  id              Int      @id @default(autoincrement())
  name            String
  name_ar         String
  url             String
  status          Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Languages {
  id              Int      @id @default(autoincrement())
  key             String   @unique
  value           String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model FAQ {
  id              Int      @id @default(autoincrement())
  name            String
  name_ar         String?
  content         String   @db.NVarChar(Max)
  content_ar      String?  @db.NVarChar(Max)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model AssetType {
  id        Int      @id @default(autoincrement())
  name_en   String
  name_ar   String
  status    Int      @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  // Relations
  iotDeviceAssets IotDeviceAsset[] // One-to-many relationship with IotDeviceAsset
}

model IotDeviceAsset {
  id          Int      @id @default(autoincrement())
  assetName   String
  assetType   String
  location    String
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  iotDeviceId   Int
  iotDevice     IotDevice @relation(fields: [iotDeviceId], references: [id], onDelete: Cascade)
  
  assetTypeId   Int
  assetTypeRef  AssetType @relation(fields: [assetTypeId], references: [id], onDelete: Cascade)
  
  transferAssets TransferAsset[] // One-to-many relationship with TransferAsset
  maintenances   Maintenance[] // One-to-many relationship with Maintenance
}

model TransferAsset {
  id              Int      @id @default(autoincrement())
  location        String
  note            String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // Relations
  iotDeviceAssetId Int
  iotDeviceAsset   IotDeviceAsset @relation(fields: [iotDeviceAssetId], references: [id], onDelete: Cascade)
  
  employeeId       Int
  employee         EmployeeList @relation(fields: [employeeId], references: [id], onDelete: Cascade)
}

model Technician {
  id        Int      @id @default(autoincrement())
  name_en   String
  name_ar   String
  status    Int      @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  // Relations
  maintenances Maintenance[] // One-to-many relationship with Maintenance
  logMaintenances LogMaintenance[]
}

model Maintenance {
  id              Int      @id @default(autoincrement())
  maintenanceType String
  scheduleDate    DateTime
  note            String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // Relations
  iotDeviceAssetId Int
  iotDeviceAsset   IotDeviceAsset @relation(fields: [iotDeviceAssetId], references: [id], onDelete: Cascade)
  
  technicianId     Int
  technician       Technician @relation(fields: [technicianId], references: [id], onDelete: Cascade)
  
  userId          String
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  logMaintenances LogMaintenance[]
}

// ManageLocation model
model ManageLocation {
  id           Int      @id @default(autoincrement())
  locationName String
  address      String
  capacity     Int
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  
  // Relations
  locationTypeId Int
  location      Location @relation(fields: [locationTypeId], references: [id], onDelete: Cascade)
  
  userId       String
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Heading {
  id            Int      @id @default(autoincrement())
  name          String
  name_ar       String
  caption       String?
  caption_ar     String?
  HTMLTag       String?  @db.NVarChar(10) // e.g., "h1", "h2", "h3", "h4", "h5", "h6"
  Description   String?  @db.NVarChar(Max)
  fontFamily    String?  @db.NVarChar(100)
  fontWeight    String?  @db.NVarChar(20) // e.g., "normal", "bold", "400", "700"
  fontSize      String?  @db.NVarChar(20) // e.g., "16px", "1.5rem"
  lineHeight    String?  @db.NVarChar(20) // e.g., "1.5", "24px"
  letterSpacing String?  @db.NVarChar(20) // e.g., "0.5px", "normal"
  textTransform String?  @db.NVarChar(20) // e.g., "uppercase", "lowercase", "capitalize", "none"
  textColor     String?  @db.NVarChar(50) // e.g., "#000000", "rgb(0,0,0)"
  textAlignment String?  @db.NVarChar(20) // e.g., "left", "center", "right", "justify"
  exampleText   String?  @db.NVarChar(Max)
  textShadow    String?  @db.NVarChar(100) // e.g., "2px 2px 4px rgba(0,0,0,0.5)"
  Visibility    Boolean? @default(true)
  name_filo     String?
  caption_flo   String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

// ResourceCategory model
model ResourceCategory {
  id        Int        @id @default(autoincrement())
  name      String
  name_ar   String
  name_filo String?
  status    Boolean    @default(true)
  resources Resource[] // One-to-many relationship with Resource
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
}

// Resource model
model Resource {
  id                Int              @id @default(autoincrement())
  title             String
  description        String?          @db.NVarChar(Max)
  file              String?           // Path to the file
  ResourceCategoryId Int              // Foreign key to ResourceCategory
  resourceCategory  ResourceCategory @relation(fields: [ResourceCategoryId], references: [id])
  version           String?
  Visibility        Boolean?          @default(true)
  expiredDate       DateTime?
  feature           Boolean?          @default(false)
  status            Boolean           @default(true)
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
}

// AssetBrand model
model AssetBrand {
  id                  Int      @id @default(autoincrement())
  name                String
  status              Boolean  @default(true)
  logo                String?  // Path or URL to the brand logo
  category            String?  // Simple text field, no relation
  supplier            String?
  website             String?
  contactInformation  String?
  relaibiblityScore   Float?   // Numeric score representing reliability
  description         String?
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
}

// AssetCategory model
model AssetCategory {
  id                 Int      @id @default(autoincrement())
  name               String
  status             Boolean  @default(true)
  description        String?
  defultDepartment   String?  // Note: spelling kept as requested
  mantenanceInterval String?  // e.g. "monthly", "90 days"
  categoryIcon       String?  // Path or URL to icon image
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  
  // Relations
  newAssets          NewAsset[] // One-to-many relationship with NewAsset
}

// NewAsset model
model NewAsset {
  id               Int             @id @default(autoincrement())
  name             String
  serialNo         String
  status           String
  purchaseDate     DateTime?
  warrantyExpiry   DateTime?
  description      String?
  image            String?
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt

  // Relations
  assetCategoryId  Int
  assetCategory    AssetCategory   @relation(fields: [assetCategoryId], references: [id])

  departmentId     Int
  department       Department      @relation(fields: [departmentId], references: [id], onUpdate: NoAction, onDelete: NoAction)

  employeeId       Int
  employee         EmployeeList    @relation(fields: [employeeId], references: [id], onUpdate: NoAction, onDelete: NoAction)

  assetConditionId Int
  assetCondition   AssetCondition  @relation(fields: [assetConditionId], references: [id])

  locationId       Int
  location         Location        @relation(fields: [locationId], references: [id])

  // Relations
  logMaintenances  LogMaintenance[]
  customEvents     CustomEvent[]
}

model LogMaintenance {
  id               Int      @id @default(autoincrement())
  issueDescription String
  priorityLevel    String
  startDate        DateTime
  endDate          DateTime?
  estimatedCost    Float?
  currentCondition String?
  additionalNotes  String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  // Relations
  newAssetId   Int
  newAsset     NewAsset     @relation(fields: [newAssetId], references: [id])

  maintenanceId Int
  maintenance   Maintenance @relation(fields: [maintenanceId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  technicianId Int
  technician   Technician  @relation(fields: [technicianId], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

// CustomEvent model for asset history custom events
model CustomEvent {
  id          Int      @id @default(autoincrement())
  eventTitle  String   @db.NVarChar(255)
  eventType   String   @db.NVarChar(50) // MAINTENANCE, INSPECTION, FUEL, ISSUE, ASSIGNMENT, TRANSFER, UPDATE, or custom
  description String?  @db.NVarChar(Max)
  eventDate   DateTime
  attachments String?  @db.NVarChar(Max) // JSON array of file paths
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relations
  newAssetId Int
  newAsset   NewAsset @relation(fields: [newAssetId], references: [id], onDelete: Cascade)

  createdByUserId String? // Optional: user who created the event
  createdByAdminId String? // Optional: admin who created the event

  @@map("custom_events")
}

// Slider model
model Slider {
  id              Int      @id @default(autoincrement())
  name            String
  assignPage      String?  @db.NVarChar(255)
  displayPosition String?  @db.NVarChar(100)
  transitionStyle String?  @db.NVarChar(100)
  transitionTime  Int?     // Transition time in milliseconds
  slideDuration   Int?     // Slide duration in milliseconds
  navigationStyle String?  @db.NVarChar(100)
  slideOption     String?  @db.NVarChar(Max) // JSON string or text
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // Relations
  sliderContents  SliderContent[] // One-to-many relationship with SliderContent
}

// SliderContent model
model SliderContent {
  id                Int      @id @default(autoincrement())
  name              String
  subTitle          String?  @db.NVarChar(Max)
  buttonText        String?  @db.NVarChar(255)
  buttonLink        String?  @db.NVarChar(500)
  backgroundImage   String?  // Path to the background image file
  textAlignment     String?  @db.NVarChar(50) // left, center, right
  textColor         String?  @db.NVarChar(50) // Hex color code
  overlayColor      String?  @db.NVarChar(50) // Hex color code with opacity
  buttonStyle       String?  @db.NVarChar(Max) // JSON string or text
  contentPosition   String?  @db.NVarChar(100) // top-left, top-center, center, etc.
  titleAnimation    String?  @db.NVarChar(100) // fadeIn, slideIn, zoomIn, etc.
  subTitleAnimation String?  @db.NVarChar(100)
  buttonAnimation   String?  @db.NVarChar(100)
  animationDelay    Int?     // Animation delay in milliseconds
  animationDuration Int?     // Animation duration in milliseconds
  staggerChildren   Boolean  @default(false) // Stagger children animations
  visibility        Boolean  @default(true) // Show/hide the content
  schedule          String?  @db.NVarChar(Max) // JSON string for scheduling
  status            String   @default("active") @db.NVarChar(20) // active, inactive
  slideOrder        Int      @default(0) // Order of the slide
  customCSSClass    String?  @db.NVarChar(255) // Custom CSS class names
  additionalSettings String? @db.NVarChar(Max) // JSON string for additional settings
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  // Relations
  sliderId          Int
  slider            Slider   @relation(fields: [sliderId], references: [id], onDelete: Cascade)
  
  @@index([sliderId])
}

// GeneralSetting model
model GeneralSetting {
  id                Int      @id @default(autoincrement())
  systemName        String?  @db.NVarChar(255)
  organizationName  String?  @db.NVarChar(255)
  contactEmail      String?  @db.NVarChar(255)
  contactPhone      String?  @db.NVarChar(50)
  landingPage       String?  @db.NVarChar(500)
  systemDescription String?  @db.NVarChar(Max)
  showBrandName     Boolean  @default(true)
  themes            String?  @db.NVarChar(20) // light, dark, auto
  timeZone          String?  @db.NVarChar(100)
  dateFormat        String?  @db.NVarChar(50)
  currencyFormat    String?  @db.NVarChar(50)
  status            String   @default("active") @db.NVarChar(20)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@map("general_settings")
}

// BrandingAppearance model
model BrandingAppearance {
  id            Int      @id @default(autoincrement())
  logo          String?  // Path or URL to the logo file
  primaryColor  String?  @db.NVarChar(50) // Hex color code
  secondaryColor String? @db.NVarChar(50) // Hex color code
  accentColor   String?  @db.NVarChar(50) // Hex color code
  fontFamily    String?  @db.NVarChar(100)
  buttonCorner  String?  @db.NVarChar(50) // e.g., "rounded", "square", "pill"
  darkThemes    Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("branding_appearances")
}

// AuthenticationSecurity model
model AuthenticationSecurity {
  id                    Int      @id @default(autoincrement())
  loginMethod           String?  @db.NVarChar(100) // e.g., "email", "username", "both"
  minPasswordLength     Int?     @default(8)
  passwordExpiry        Int?     // Days until password expires
  reqSpecialCharacter   Boolean  @default(false) @map("req_spacial_character")
  twoFactorAuth         Boolean  @default(false)
  twoFAMethod           String?  @map("2fa_method") @db.NVarChar(50) // e.g., "email", "sms", "app"
  sessionTime           Int?     // Session timeout in minutes
  autoLogout            Boolean  @default(false)
  loginAttemptLimit     Int?     @default(5) // Maximum login attempts before lockout
  lockOutDuration       Int?     // Lockout duration in minutes
  rememberMe            Boolean  @default(false)
  userRegistration      Boolean  @default(false)
  emailVerificationReq  Boolean  @default(false) @map("email_varification_req")
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  @@map("authentication_securities")
}

// SettingRolePermission model
model SettingRolePermission {
  id                    Int      @id @default(autoincrement())
  roleForNewUsers       String?  @db.NVarChar(255) // Role name or role ID for new users
  allowRoleEditor       Boolean  @default(false)
  allowDeparmentCreation Boolean @default(false) @map("allow_deparment_creation")
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  @@map("setting_role_permissions")
}

// NotificationAlert model
model NotificationAlert {
  id                Int      @id @default(autoincrement())
  emailNotification Boolean  @default(false)
  pushNotification  Boolean  @default(false)
  dailySummaryEmail Boolean  @default(false)
  notificationSound Boolean  @default(false)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@map("notification_alerts")
}

// ApiIntegration model
model ApiIntegration {
  id                  Int      @id @default(autoincrement())
  apiKey              String   @db.NVarChar(Max)
  googleMapIntegration Boolean @default(false)
  cloudStorage        Boolean  @default(false)
  emailService        Boolean  @default(false)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@map("api_integrations")
}
// DataManagement model
model DataManagement {
  id                  Int       @id @default(autoincrement())
  file                String?   // Path to the file
  exportData          String?   // Could be JSON string or description
  autoBackUpDate      DateTime?
  dataRetentionPolicy String?   // Policy name or description
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt

  @@map("data_managements")
}

// LanguageLocalization model
model LanguageLocalization {
  id              Int      @id @default(autoincrement())
  defaultLanguage String   @db.NVarChar(50)
  RTLSupport      Boolean  @default(false)
  currencySymbol  String   @default("left") @db.NVarChar(20) // left, right
  unitSystem      String   @default("metric") @db.NVarChar(20) // metric, imperial
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("language_localizations")
}

// AuditLogSetting model
model AuditLogSetting {
  id                 Int      @id @default(autoincrement())
  enableAuditLogging Boolean  @default(true)
  logLevel           String   @default("All Activities") @db.NVarChar(50)
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@map("audit_log_settings")
}

// AuditLog model
model AuditLog {
  id        Int      @id @default(autoincrement())
  activity  String   @db.NVarChar(255)
  userId    String?  @db.NVarChar(100)
  userName  String?  @db.NVarChar(100)
  timestamp DateTime @default(now())
  status    String   @db.NVarChar(50)
  details   String?  @db.NVarChar(Max)

  @@map("audit_logs")
}
